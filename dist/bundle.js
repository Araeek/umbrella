(()=>{"use strict";const e=new Headers({"X-Api-Key":"09tYeXCwhiKsMjQY6ME1Rw==sEbRPFDVhcuP3U1R","Content-Type":"application/json"});(async function(e){try{const e=await fetch("https://api.weatherapi.com/v1/forecast.json?q=esfahan&key=2d0f4b140e8f4e0fb9664239232005",{mode:"cors"});return await e.json()}catch(e){console.log(e.message)}})().then((e=>{const t=new Date;var n,c,o,a,s,d,r;n=e.location.name,document.querySelector(".city-name").textContent=n,c=e.current.temp_c,document.querySelector(".city-temp").textContent=c+"°",o=e.current.condition.text,document.querySelector(".city-cond").textContent=o,a=e.current.is_day,s=e.current.condition.code,document.querySelector(".weather-icon img").src=`assets/icons/${a?"day":"night"}/${s}.png`,function(e){document.querySelector(".real-feel+.air-info-data").textContent=Math.round(e)+"°"}(e.current.feelslike_c),d=e.current.wind_kph,document.querySelector(".wind+.air-info-data").textContent=`${d} km/h`,function(e){const t=document.querySelector(".chance-of-rain>span"),n=document.querySelector(".rain-chance+.air-info-data");t.textContent=e,n.textContent=`${e} %`}(e.forecast.forecastday[0].hour[t.getHours()].chance_of_rain),function(e,t){const n=document.querySelector(".today-forecast-list");for(let c=t+1;c<t+7;c++){24===c&&(c=0);const t=document.createElement("li");t.classList.add("today-forecast-item");const o=document.createElement("h5");o.classList.add("today-forecast-time"),o.textContent=`${c%12==0?"12":c%12}:00 ${1===Math.ceil(c/12)?"AM":"PM"}`;const a=document.createElement("div");a.classList.add("today-weather-icon");const s=document.createElement("img");s.src=`assets/icons/${e[c].is_day?"day":"night"}/${e[c].condition.code}.png`,a.append(s);const d=document.createElement("p");d.classList.add("today-forecast-temp"),d.textContent=Math.round(e[c].temp_c),t.append(o),t.append(a),t.append(d),n.append(t)}}(e.forecast.forecastday[0].hour,t.getHours()),r=e.current.uv,document.querySelector(".uv+.air-info-data").textContent=r})),async function(e){try{const e=await fetch("https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/esfahan?unitGroup=metric&include=days&key=U6246QRR7XRLWVKSZLRVU2GXK&contentType=json&iconSet=icons1",{mode:"cors"});return await e.json()}catch(e){console.log(e.message)}}().then((e=>{!function(e){const t=document.querySelector("#seven-forecast-list");for(let n=0;n<7;n++){const c=document.createElement("li");c.classList.add("seven-forecast-item");const o=document.createElement("span");o.classList.add("seven-forecast-day");const a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];o.textContent=`${0===n?"Today":a[new Date(e[n].datetime).getDay()]}`;const s=document.createElement("div");s.classList.add("seven-forecast-weather");const d=document.createElement("img"),r={snow:1225,rain:1189,fog:1030,wind:1542,cloudy:1006,"partly-cloudy-day":1003,"partly-cloudy-night":1003,"clear-day":1e3,"clear-night":1e3};d.src=`assets/icons/day/${r[e[n].icon]}.png`;const i=document.createElement("p");i.textContent=e[n].conditions,s.append(d),s.append(i);const u=document.createElement("p");u.classList.add("high-low");const l=document.createElement("span");l.textContent=Math.round(e[n].tempmax),u.append(l),u.append(`/${Math.round(e[n].tempmin)}`),c.append(o),c.append(s),c.append(u),t.append(c)}}(e.days)}));const t=document.getElementById("search-result"),n=document.getElementsByClassName("close")[0],c=document.getElementById("search-bar"),o=document.getElementById("result-list");function a(){t.style.display="none"}c.addEventListener("submit",(function(n){n.preventDefault(),async function(t){try{const n=await fetch(`https://api.api-ninjas.com/v1/city?name=${t}&limit=10`,{mode:"cors",method:"GET",headers:e});return await n.json()}catch(e){console.log(e.message)}}(document.getElementById("city-search").value).then((e=>{e.forEach((e=>{const t=document.createElement("li"),n=document.createElement("p"),c=document.createElement("button");t.classList.add("city-item"),n.textContent=`${e.name}, ${e.country}`,c.textContent="Set",t.append(n),t.append(c),o.append(t)}))})),o.innerHTML="",t.style.display="block"})),n.addEventListener("click",a),window.addEventListener("click",(function(e){e.target===t&&a()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxFQUFTdkMsT0FBT3lDLEdBQ2hCYixFQUFXNUIsT0FBT3VDLEVBQVMsR0FDM0IsSUFyQkpYLEVBQVdlLFVBQVksR0FDdkJwQixFQUFhTyxNQUFNQyxRQUFVLE9BK0IvQixJQUdBTixFQUFZTyxpQkFBaUIsUUFBU0gsR0FHdENlLE9BQU9aLGlCQUFpQixTQUFTLFNBQVVDLEdBQ3JDQSxFQUFFWSxTQUFXdEIsR0FDZk0sR0FFSixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdW1icmVsbGEvLi9zcmMvYXBpLmpzIiwid2VicGFjazovL3VtYnJlbGxhLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImFzeW5jIGZ1bmN0aW9uIGdldEZvcmVjYXN0RGF0YShjaXR5KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgIGBodHRwczovL2FwaS53ZWF0aGVyYXBpLmNvbS92MS9mb3JlY2FzdC5qc29uP3E9JHtjaXR5fSZrZXk9MmQwZjRiMTQwZThmNGUwZmI5NjY0MjM5MjMyMDA1YCxcclxuICAgICAge1xyXG4gICAgICAgIG1vZGU6IFwiY29yc1wiLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoe1xyXG4gICdYLUFwaS1LZXknOiBcIjA5dFllWEN3aGlLc01qUVk2TUUxUnc9PXNFYlJQRkRWaGN1UDNVMVJcIixcclxuICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG59KTtcclxuYXN5bmMgZnVuY3Rpb24gZ2V0U2VhcmNoRGF0YShjaXR5KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgIGBodHRwczovL2FwaS5hcGktbmluamFzLmNvbS92MS9jaXR5P25hbWU9JHtjaXR5fSZsaW1pdD0xMGAsXHJcbiAgICAgIHtcclxuICAgICAgICBtb2RlOiBcImNvcnNcIixcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldERhaWx5Rm9yZWNhc3REYXRhKGNpdHkpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgICAgYGh0dHBzOi8vd2VhdGhlci52aXN1YWxjcm9zc2luZy5jb20vVmlzdWFsQ3Jvc3NpbmdXZWJTZXJ2aWNlcy9yZXN0L3NlcnZpY2VzL3RpbWVsaW5lLyR7Y2l0eX0/dW5pdEdyb3VwPW1ldHJpYyZpbmNsdWRlPWRheXMma2V5PVU2MjQ2UVJSN1hSTFdWS1NaTFJWVTJHWEsmY29udGVudFR5cGU9anNvbiZpY29uU2V0PWljb25zMWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtb2RlOiBcImNvcnNcIixcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgZ2V0Rm9yZWNhc3REYXRhLCBnZXREYWlseUZvcmVjYXN0RGF0YSwgZ2V0U2VhcmNoRGF0YSB9O1xyXG4iLCJpbXBvcnQgeyBnZXRGb3JlY2FzdERhdGEsIGdldERhaWx5Rm9yZWNhc3REYXRhLCBnZXRTZWFyY2hEYXRhIH0gZnJvbSBcIi4vYXBpLmpzXCI7XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVDaXR5TmFtZShuYW1lKSB7XHJcbiAgY29uc3QgY2l0eU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNpdHktbmFtZVwiKTtcclxuICBjaXR5TmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUNpdHlUZW1wKHRlbXApIHtcclxuICBjb25zdCBjaXR5VGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2l0eS10ZW1wXCIpO1xyXG4gIGNpdHlUZW1wLnRleHRDb250ZW50ID0gdGVtcCArIFwiwrBcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlQ2l0eUNvbmRpdGlvbihjb25kKSB7XHJcbiAgY29uc3QgY2l0eUNvbmRpdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2l0eS1jb25kXCIpO1xyXG4gIGNpdHlDb25kaXRpb24udGV4dENvbnRlbnQgPSBjb25kO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVDaXR5SWNvbihpc2RheSwgY29kZSkge1xyXG4gIGNvbnN0IGNpdHlJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53ZWF0aGVyLWljb24gaW1nXCIpO1xyXG4gIGNpdHlJY29uLnNyYyA9IGBhc3NldHMvaWNvbnMvJHtpc2RheSA/IFwiZGF5XCIgOiBcIm5pZ2h0XCJ9LyR7Y29kZX0ucG5nYDtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlQ2hhbmNlT2ZSYWluKHBlcmMpIHtcclxuICBjb25zdCByYWluQ2hhbmNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaGFuY2Utb2YtcmFpbj5zcGFuXCIpO1xyXG4gIGNvbnN0IHJhaW5DaGFuY2VBaXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJhaW4tY2hhbmNlKy5haXItaW5mby1kYXRhXCIpO1xyXG4gIHJhaW5DaGFuY2UudGV4dENvbnRlbnQgPSBwZXJjO1xyXG4gIHJhaW5DaGFuY2VBaXIudGV4dENvbnRlbnQgPSBgJHtwZXJjfSAlYDtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlSG91cmx5Rm9yZWNhc3QoaG91cnMsIHRpbWUpIHtcclxuICBjb25zdCBmb3JlY2FzdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZGF5LWZvcmVjYXN0LWxpc3RcIik7XHJcbiAgZm9yIChsZXQgaSA9IHRpbWUgKyAxOyBpIDwgdGltZSArIDc7IGkrKykge1xyXG4gICAgaWYgKGkgPT09IDI0KSB7XHJcbiAgICAgIGkgPSAwO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZm9yZWNhc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgZm9yZWNhc3RJdGVtLmNsYXNzTGlzdC5hZGQoXCJ0b2RheS1mb3JlY2FzdC1pdGVtXCIpO1xyXG4gICAgLy8gVG9kYXkgZm9yZWNhc3QgdGltZVxyXG4gICAgY29uc3QgZm9yZWNhc3RUaW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImg1XCIpO1xyXG4gICAgZm9yZWNhc3RUaW1lLmNsYXNzTGlzdC5hZGQoXCJ0b2RheS1mb3JlY2FzdC10aW1lXCIpO1xyXG4gICAgZm9yZWNhc3RUaW1lLnRleHRDb250ZW50ID0gYCR7aSAlIDEyID09PSAwID8gXCIxMlwiIDogaSAlIDEyfTowMCAke1xyXG4gICAgICBNYXRoLmNlaWwoaSAvIDEyKSA9PT0gMSA/IFwiQU1cIiA6IFwiUE1cIlxyXG4gICAgfWA7XHJcbiAgICAvLyBUb2RheSBmb3JlY2FzdCBpY29uXHJcbiAgICBjb25zdCBmb3JlY2FzdEljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZm9yZWNhc3RJY29uLmNsYXNzTGlzdC5hZGQoXCJ0b2RheS13ZWF0aGVyLWljb25cIik7XHJcbiAgICBjb25zdCBmb3JlY2FzdEljb25JbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgZm9yZWNhc3RJY29uSW1nLnNyYyA9IGBhc3NldHMvaWNvbnMvJHtcclxuICAgICAgaG91cnNbaV1bXCJpc19kYXlcIl0gPyBcImRheVwiIDogXCJuaWdodFwiXHJcbiAgICB9LyR7aG91cnNbaV1bXCJjb25kaXRpb25cIl1bXCJjb2RlXCJdfS5wbmdgO1xyXG4gICAgZm9yZWNhc3RJY29uLmFwcGVuZChmb3JlY2FzdEljb25JbWcpO1xyXG4gICAgLy9Ub2RheSBmb3JlY2FzdCB0ZW1wXHJcbiAgICBjb25zdCBmb3JlY2FzdFRlbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgIGZvcmVjYXN0VGVtcC5jbGFzc0xpc3QuYWRkKFwidG9kYXktZm9yZWNhc3QtdGVtcFwiKTtcclxuICAgIGZvcmVjYXN0VGVtcC50ZXh0Q29udGVudCA9IE1hdGgucm91bmQoaG91cnNbaV1bXCJ0ZW1wX2NcIl0pO1xyXG4gICAgLy9BcHBlbmRpbmcgYWxsIHRvIGZvcmVjYXN0IGl0ZW0gYW5kIHRoZW4gdG8gZm9yZWNhc3QgbGlzdFxyXG4gICAgZm9yZWNhc3RJdGVtLmFwcGVuZChmb3JlY2FzdFRpbWUpO1xyXG4gICAgZm9yZWNhc3RJdGVtLmFwcGVuZChmb3JlY2FzdEljb24pO1xyXG4gICAgZm9yZWNhc3RJdGVtLmFwcGVuZChmb3JlY2FzdFRlbXApO1xyXG4gICAgZm9yZWNhc3RMaXN0LmFwcGVuZChmb3JlY2FzdEl0ZW0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlRmVlbCh0ZW1wKSB7XHJcbiAgY29uc3QgZmVsbHNMaWtlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZWFsLWZlZWwrLmFpci1pbmZvLWRhdGFcIik7XHJcbiAgZmVsbHNMaWtlLnRleHRDb250ZW50ID0gTWF0aC5yb3VuZCh0ZW1wKSArIFwiwrBcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlV2luZChzcGVlZCkge1xyXG4gIGNvbnN0IHdpbmRTcGVlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2luZCsuYWlyLWluZm8tZGF0YVwiKTtcclxuICB3aW5kU3BlZWQudGV4dENvbnRlbnQgPSBgJHtzcGVlZH0ga20vaGA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVVWKHV2SW5kZXgpIHtcclxuICBjb25zdCB1diA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXYrLmFpci1pbmZvLWRhdGFcIik7XHJcbiAgdXYudGV4dENvbnRlbnQgPSB1dkluZGV4O1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVEYWlseUZvcmVjYXN0KGRheXMpIHtcclxuICBjb25zdCBkYXlGb3JlY2FzdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NldmVuLWZvcmVjYXN0LWxpc3RcIik7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCA3OyBpKyspIHtcclxuICAgIGNvbnN0IGRheUZvcmVjYXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgIGRheUZvcmVjYXN0SXRlbS5jbGFzc0xpc3QuYWRkKFwic2V2ZW4tZm9yZWNhc3QtaXRlbVwiKTtcclxuICAgIC8vZGF5IGZvcmVjYXN0IGRheVxyXG4gICAgY29uc3QgZGF5Rm9yZWNhc3REYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgIGRheUZvcmVjYXN0RGF5LmNsYXNzTGlzdC5hZGQoXCJzZXZlbi1mb3JlY2FzdC1kYXlcIik7XHJcbiAgICBjb25zdCBXRUVLREFZUyA9IFtcclxuICAgICAgXCJTdW5kYXlcIixcclxuICAgICAgXCJNb25kYXlcIixcclxuICAgICAgXCJUdWVzZGF5XCIsXHJcbiAgICAgIFwiV2VkbmVzZGF5XCIsXHJcbiAgICAgIFwiVGh1cnNkYXlcIixcclxuICAgICAgXCJGcmlkYXlcIixcclxuICAgICAgXCJTYXR1cmRheVwiLFxyXG4gICAgXTtcclxuICAgIGRheUZvcmVjYXN0RGF5LnRleHRDb250ZW50ID0gYCR7XHJcbiAgICAgIGkgPT09IDAgPyBcIlRvZGF5XCIgOiBXRUVLREFZU1tuZXcgRGF0ZShkYXlzW2ldW1wiZGF0ZXRpbWVcIl0pLmdldERheSgpXVxyXG4gICAgfWA7XHJcbiAgICAvL2RheSBmb3JlY2FzdCBpY29uXHJcbiAgICBjb25zdCBkYXlGb3JlY2FzdEljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZGF5Rm9yZWNhc3RJY29uLmNsYXNzTGlzdC5hZGQoXCJzZXZlbi1mb3JlY2FzdC13ZWF0aGVyXCIpO1xyXG4gICAgY29uc3QgZGF5Rm9yZWNhc3RJY29uSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgIGNvbnN0IElDT05TX0NPREUgPSB7XHJcbiAgICAgIHNub3c6IDEyMjUsXHJcbiAgICAgIHJhaW46IDExODksXHJcbiAgICAgIGZvZzogMTAzMCxcclxuICAgICAgd2luZDogMTU0MixcclxuICAgICAgY2xvdWR5OiAxMDA2LFxyXG4gICAgICBcInBhcnRseS1jbG91ZHktZGF5XCI6IDEwMDMsXHJcbiAgICAgIFwicGFydGx5LWNsb3VkeS1uaWdodFwiOiAxMDAzLFxyXG4gICAgICBcImNsZWFyLWRheVwiOiAxMDAwLFxyXG4gICAgICBcImNsZWFyLW5pZ2h0XCI6IDEwMDAsXHJcbiAgICB9O1xyXG4gICAgZGF5Rm9yZWNhc3RJY29uSW1nLnNyYyA9IGBhc3NldHMvaWNvbnMvZGF5LyR7XHJcbiAgICAgIElDT05TX0NPREVbZGF5c1tpXVtcImljb25cIl1dXHJcbiAgICB9LnBuZ2A7XHJcbiAgICBjb25zdCBkYXlGb3JlY2FzdFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgIGRheUZvcmVjYXN0VGV4dC50ZXh0Q29udGVudCA9IGRheXNbaV1bXCJjb25kaXRpb25zXCJdO1xyXG4gICAgZGF5Rm9yZWNhc3RJY29uLmFwcGVuZChkYXlGb3JlY2FzdEljb25JbWcpO1xyXG4gICAgZGF5Rm9yZWNhc3RJY29uLmFwcGVuZChkYXlGb3JlY2FzdFRleHQpO1xyXG4gICAgLy9kYXkgZm9yZWNhc3QgaGlnaGxvd1xyXG4gICAgY29uc3QgZGF5SGlnaGxvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gICAgZGF5SGlnaGxvdy5jbGFzc0xpc3QuYWRkKFwiaGlnaC1sb3dcIik7XHJcbiAgICBjb25zdCBsb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgIGxvdy50ZXh0Q29udGVudCA9IE1hdGgucm91bmQoZGF5c1tpXVtcInRlbXBtYXhcIl0pO1xyXG4gICAgZGF5SGlnaGxvdy5hcHBlbmQobG93KTtcclxuICAgIGRheUhpZ2hsb3cuYXBwZW5kKGAvJHtNYXRoLnJvdW5kKGRheXNbaV1bXCJ0ZW1wbWluXCJdKX1gKTtcclxuICAgIC8vYXBwZW5kaW5nIGFsbFxyXG4gICAgZGF5Rm9yZWNhc3RJdGVtLmFwcGVuZChkYXlGb3JlY2FzdERheSk7XHJcbiAgICBkYXlGb3JlY2FzdEl0ZW0uYXBwZW5kKGRheUZvcmVjYXN0SWNvbik7XHJcbiAgICBkYXlGb3JlY2FzdEl0ZW0uYXBwZW5kKGRheUhpZ2hsb3cpO1xyXG4gICAgZGF5Rm9yZWNhc3RMaXN0LmFwcGVuZChkYXlGb3JlY2FzdEl0ZW0pO1xyXG4gIH1cclxufVxyXG5cclxuZ2V0Rm9yZWNhc3REYXRhKFwiZXNmYWhhblwiKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgdXBkYXRlQ2l0eU5hbWUoZGF0YS5sb2NhdGlvbi5uYW1lKTtcclxuICB1cGRhdGVDaXR5VGVtcChkYXRhLmN1cnJlbnRbXCJ0ZW1wX2NcIl0pO1xyXG4gIHVwZGF0ZUNpdHlDb25kaXRpb24oZGF0YS5jdXJyZW50LmNvbmRpdGlvbi50ZXh0KTtcclxuICB1cGRhdGVDaXR5SWNvbihkYXRhLmN1cnJlbnRbXCJpc19kYXlcIl0sIGRhdGEuY3VycmVudC5jb25kaXRpb24uY29kZSk7XHJcbiAgdXBkYXRlRmVlbChkYXRhLmN1cnJlbnQuZmVlbHNsaWtlX2MpO1xyXG4gIHVwZGF0ZVdpbmQoZGF0YS5jdXJyZW50LndpbmRfa3BoKTtcclxuICB1cGRhdGVDaGFuY2VPZlJhaW4oXHJcbiAgICBkYXRhLmZvcmVjYXN0LmZvcmVjYXN0ZGF5W1wiMFwiXVtcImhvdXJcIl1bZGF0ZS5nZXRIb3VycygpXVtcImNoYW5jZV9vZl9yYWluXCJdXHJcbiAgKTtcclxuICB1cGRhdGVIb3VybHlGb3JlY2FzdChkYXRhLmZvcmVjYXN0LmZvcmVjYXN0ZGF5W1wiMFwiXVtcImhvdXJcIl0sIGRhdGUuZ2V0SG91cnMoKSk7XHJcbiAgdXBkYXRlVVYoZGF0YS5jdXJyZW50LnV2KTtcclxufSk7XHJcblxyXG5nZXREYWlseUZvcmVjYXN0RGF0YShcImVzZmFoYW5cIikudGhlbigoZGF0YSkgPT4ge1xyXG4gIHVwZGF0ZURhaWx5Rm9yZWNhc3QoZGF0YVtcImRheXNcIl0pO1xyXG59KTtcclxuXHJcbmNvbnN0IGNpdHlMaXN0ID0gW107XHJcblxyXG4vLyBHZXQgdGhlIG1vZGFsIGFuZCB0aGUgY2xvc2UgYnV0dG9uXHJcbmNvbnN0IHNlYXJjaFJlc3VsdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoLXJlc3VsdFwiKTtcclxuY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2xvc2VcIilbMF07XHJcblxyXG4vLyBHZXQgdGhlIGZvcm1cclxuY29uc3Qgc2VhcmNoQmFyRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoLWJhclwiKTtcclxuY29uc3QgcmVzdWx0TGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzdWx0LWxpc3RcIik7XHJcblxyXG4vLyBGdW5jdGlvbiB0byBkaXNwbGF5IHRoZSBtb2RhbFxyXG5mdW5jdGlvbiBzaG93UmVzdWx0KCkge1xyXG4gIHJlc3VsdExpc3QuaW5uZXJIVE1MID0gXCJcIlxyXG4gIHNlYXJjaFJlc3VsdC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG59XHJcblxyXG4vLyBGdW5jdGlvbiB0byBoaWRlIHRoZSBtb2RhbFxyXG5mdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xyXG4gIHNlYXJjaFJlc3VsdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlclNlYXJjaFJlc3VsdHMocXVlcnkpIHtcclxuICBnZXRTZWFyY2hEYXRhKHF1ZXJ5KS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICBkYXRhLmZvckVhY2goKGNpdHkpID0+IHtcclxuICAgICAgY29uc3QgY2l0eUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgIGNvbnN0IGNpdHlOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICAgIGNvbnN0IGNpdHlTZXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICBjaXR5SXRlbS5jbGFzc0xpc3QuYWRkKFwiY2l0eS1pdGVtXCIpO1xyXG4gICAgICBjaXR5TmFtZS50ZXh0Q29udGVudCA9IGAke2NpdHkubmFtZX0sICR7Y2l0eS5jb3VudHJ5fWA7XHJcbiAgICAgIGNpdHlTZXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNldFwiO1xyXG4gICAgICBjaXR5SXRlbS5hcHBlbmQoY2l0eU5hbWUpO1xyXG4gICAgICBjaXR5SXRlbS5hcHBlbmQoY2l0eVNldEJ1dHRvbik7XHJcbiAgICAgIHJlc3VsdExpc3QuYXBwZW5kKGNpdHlJdGVtKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBFdmVudCBsaXN0ZW5lciBmb3IgdGhlIGZvcm0gc3VibWlzc2lvblxyXG5zZWFyY2hCYXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgZm9ybSBzdWJtaXNzaW9uXHJcbiAgY29uc3QgaW5wdXRWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2l0eS1zZWFyY2hcIikudmFsdWU7XHJcbiAgcmVuZGVyU2VhcmNoUmVzdWx0cyhpbnB1dFZhbHVlKTtcclxuICAvLyBTaG93IHRoZSBtb2RhbFxyXG4gIHNob3dSZXN1bHQoKTtcclxufSk7XHJcblxyXG4vLyBFdmVudCBsaXN0ZW5lciB0byBjbG9zZSB0aGUgbW9kYWwgd2hlbiB0aGUgY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWRcclxuY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlTW9kYWwpO1xyXG5cclxuLy8gRXZlbnQgbGlzdGVuZXIgdG8gY2xvc2UgdGhlIG1vZGFsIHdoZW4gY2xpY2tpbmcgb3V0c2lkZSB0aGUgbW9kYWxcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gIGlmIChlLnRhcmdldCA9PT0gc2VhcmNoUmVzdWx0KSB7XHJcbiAgICBjbG9zZU1vZGFsKCk7XHJcbiAgfVxyXG59KTtcclxuIl0sIm5hbWVzIjpbImhlYWRlcnMiLCJIZWFkZXJzIiwiYXN5bmMiLCJjaXR5IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1vZGUiLCJqc29uIiwiZXJyIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2UiLCJnZXRGb3JlY2FzdERhdGEiLCJ0aGVuIiwiZGF0YSIsImRhdGUiLCJEYXRlIiwibmFtZSIsInRlbXAiLCJjb25kIiwiaXNkYXkiLCJjb2RlIiwic3BlZWQiLCJ1dkluZGV4IiwibG9jYXRpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImN1cnJlbnQiLCJjb25kaXRpb24iLCJ0ZXh0Iiwic3JjIiwiTWF0aCIsInJvdW5kIiwidXBkYXRlRmVlbCIsImZlZWxzbGlrZV9jIiwid2luZF9rcGgiLCJwZXJjIiwicmFpbkNoYW5jZSIsInJhaW5DaGFuY2VBaXIiLCJ1cGRhdGVDaGFuY2VPZlJhaW4iLCJmb3JlY2FzdCIsImZvcmVjYXN0ZGF5IiwiZ2V0SG91cnMiLCJob3VycyIsInRpbWUiLCJmb3JlY2FzdExpc3QiLCJpIiwiZm9yZWNhc3RJdGVtIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImZvcmVjYXN0VGltZSIsImNlaWwiLCJmb3JlY2FzdEljb24iLCJmb3JlY2FzdEljb25JbWciLCJhcHBlbmQiLCJmb3JlY2FzdFRlbXAiLCJ1cGRhdGVIb3VybHlGb3JlY2FzdCIsInV2IiwiZ2V0RGFpbHlGb3JlY2FzdERhdGEiLCJkYXlzIiwiZGF5Rm9yZWNhc3RMaXN0IiwiZGF5Rm9yZWNhc3RJdGVtIiwiZGF5Rm9yZWNhc3REYXkiLCJXRUVLREFZUyIsImdldERheSIsImRheUZvcmVjYXN0SWNvbiIsImRheUZvcmVjYXN0SWNvbkltZyIsIklDT05TX0NPREUiLCJzbm93IiwicmFpbiIsImZvZyIsIndpbmQiLCJjbG91ZHkiLCJkYXlGb3JlY2FzdFRleHQiLCJkYXlIaWdobG93IiwibG93IiwidXBkYXRlRGFpbHlGb3JlY2FzdCIsInNlYXJjaFJlc3VsdCIsImdldEVsZW1lbnRCeUlkIiwiY2xvc2VCdXR0b24iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic2VhcmNoQmFyRm9ybSIsInJlc3VsdExpc3QiLCJjbG9zZU1vZGFsIiwic3R5bGUiLCJkaXNwbGF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIm1ldGhvZCIsImdldFNlYXJjaERhdGEiLCJ2YWx1ZSIsImZvckVhY2giLCJjaXR5SXRlbSIsImNpdHlOYW1lIiwiY2l0eVNldEJ1dHRvbiIsImNvdW50cnkiLCJpbm5lckhUTUwiLCJ3aW5kb3ciLCJ0YXJnZXQiXSwic291cmNlUm9vdCI6IiJ9